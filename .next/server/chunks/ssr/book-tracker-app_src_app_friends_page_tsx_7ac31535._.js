module.exports=[37738,a=>{"use strict";var b=a.i(86531),c=a.i(52715),d=a.i(14366),e=a.i(1791),f=a.i(75662),g=a.i(96039);function h(){let{user:a}=(0,d.useAuth)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!0);(0,c.useEffect)(()=>{a&&(r(),s())},[a]);let r=async()=>{try{let{data:b,error:c}=await e.supabase.from("follows").select("*").eq("follower_id",a?.id);b&&!c&&i(b)}catch(a){console.error("Error fetching follows:",a)}finally{q(!1)}},s=async()=>{try{let{data:b,error:c}=await e.supabase.from("follows").select("*").eq("following_id",a?.id);b&&!c&&k(b)}catch(a){console.error("Error fetching followers:",a)}},t=async b=>{if(!b.trim())return void m([]);try{let{data:c,error:d}=await e.supabase.from("users").select("*").or(`username.ilike.%${b}%,name.ilike.%${b}%`).neq("id",a?.id).limit(10);c&&!d&&m(c)}catch(a){console.error("Error searching users:",a)}},u=async b=>{try{if(h.some(a=>a.following_id===b)){let{error:c}=await e.supabase.from("follows").delete().eq("follower_id",a?.id).eq("following_id",b);c||(i(a=>a.filter(a=>a.following_id!==b)),m(a=>a.map(a=>(a.id,a))))}else{let{error:c}=await e.supabase.from("follows").insert({follower_id:a?.id,following_id:b});c||(i(c=>[...c,{id:`temp_${Date.now()}`,follower_id:a?.id,following_id:b,created_at:new Date().toISOString()}]),m(a=>a.filter(a=>a.id!==b)))}}catch(a){console.error("Error toggling follow:",a)}};return a?p?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-lg",children:"Loading friends..."})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,b.jsx)(g.FiUsers,{className:"w-8 h-8 mr-3 text-blue-600"}),"Friends"]}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Connect with other book lovers"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Find Friends"}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),t(n)},className:"flex space-x-2",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(g.FiSearch,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),placeholder:"Search by username...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-900"})]}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Search"})]}),l.length>0&&(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Search Results"}),l.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-xs text-gray-600",children:a.name?.charAt(0)||a.username?.charAt(0)?.toUpperCase()})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name||a.username}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:["@",a.username]})]})]}),(0,b.jsxs)("button",{onClick:()=>u(a.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 flex items-center",children:[(0,b.jsx)(g.FiUserPlus,{className:"w-3 h-3 mr-1"}),"Follow"]})]},a.id))]})]}),j.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Your Followers (",j.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.slice(0,6).map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-md",children:[(0,b.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"User"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Follows you"})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Following (",h.length,")"]}),h.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.slice(0,6).map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors",children:[(0,b.jsx)("div",{className:"h-12 w-12 bg-gray-300 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-lg text-gray-600",children:"U"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"User"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Following since"})]}),(0,b.jsx)("button",{onClick:()=>u(a.following_id),className:"text-red-600 hover:text-red-800 text-sm",children:(0,b.jsx)(g.FiX,{className:"w-5 h-5"})})]},a.id))}):(0,b.jsx)("p",{className:"text-gray-500",children:"Not following anyone yet. Start searching for people to connect with!"})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Stats"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Following"}),(0,b.jsx)("span",{className:"font-semibold",children:h.length})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Followers"}),(0,b.jsx)("span",{className:"font-semibold",children:j.length})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Links"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(f.default,{href:"/profile",className:"block w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md",children:"Your Profile"}),(0,b.jsx)(f.default,{href:"/search",className:"block w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md",children:"Discover Books"}),(0,b.jsx)(f.default,{href:"/dashboard",className:"block w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md",children:"Dashboard"})]})]})]})]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please sign in to view friends"}),(0,b.jsx)(f.default,{href:"/auth/signin",className:"text-blue-600 hover:text-blue-800",children:"Sign In"})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=book-tracker-app_src_app_friends_page_tsx_7ac31535._.js.map