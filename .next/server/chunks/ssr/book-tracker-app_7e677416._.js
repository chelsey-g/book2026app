module.exports=[78518,a=>{"use strict";let b=(0,a.i(59129).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],78518)},39405,a=>{"use strict";let b=(0,a.i(59129).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],39405)},56401,a=>{"use strict";let b=(0,a.i(59129).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],56401)},31264,a=>{"use strict";var b=a.i(86531),c=a.i(52715),d=a.i(14366),e=a.i(20607),f=a.i(78518),g=a.i(39405),h=a.i(56401);function i({params:a}){let{user:i}=(0,d.useAuth)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)({rating:0,content:""}),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(0),[z,A]=(0,c.useState)("recent");(0,c.useEffect)(()=>{a.then(({id:a})=>{k(a)})},[a]),(0,c.useEffect)(()=>{j&&(C(),D())},[j]),(0,c.useEffect)(()=>{B()},[n,x,z]);let B=()=>{let a=n;x>0&&(a=a.filter(a=>a.rating>=x));let b=[...a];"highest"===z?b.sort((a,b)=>b.rating-a.rating):"lowest"===z?b.sort((a,b)=>a.rating-b.rating):b.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()),q(b)},C=async()=>{try{let a=await fetch(`/api/books/${j}`),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to fetch book details");if(m(b.book),i){let a=await fetch("/api/users/books"),b=(await a.json()).books.find(a=>a.books?.isbn===j||a.book_id===j);b&&u(b.status)}}catch(a){console.error("Error fetching book details:",a)}},D=async()=>{try{let a=await fetch(`/api/reviews?bookId=${j}`),b=await a.json();a.ok&&b.reviews&&o(b.reviews)}catch(a){console.error("Error fetching reviews:",a)}finally{w(!1)}},E=async a=>{if(!i)return void alert("Please sign in to add books to your list");if(!l)return void alert("Book information not loaded");try{let b=await fetch("/api/users/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:l.isbn||l.id,title:l.title,author:l.author,description:l.description,coverUrl:l.coverUrl,isbn:l.isbn,pageCount:l.pageCount,publishedDate:l.publishedDate,status:a})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to add book");u(a),alert(`Book added to ${a.toLowerCase().replace(/_/g," ")} list`)}catch(a){console.error("Error adding book:",a),alert("Failed to add book. Please try again.")}},F=async a=>{if(a.preventDefault(),!i)return void alert("Please sign in to submit a review");if(0===r.rating)return void alert("Please select a rating");if(!l)return void alert("Book information not loaded");try{let a=await fetch("/api/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:l.isbn||l.id,rating:r.rating,content:r.content})}),b=await a.json();if(!a.ok)throw Error(b.error||"Failed to submit review");o([b.review,...n]),s({rating:0,content:""}),alert("Review submitted successfully!")}catch(a){console.error("Error submitting review:",a),alert("Failed to submit review. Please try again.")}};return v?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(e.BookOpen,{className:"h-12 w-12 text-indigo-600 mx-auto mb-4 animate-pulse"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading book details..."})]})}):l?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"md:col-span-1",children:[l.coverUrl?(0,b.jsx)("img",{src:l.coverUrl,alt:l.title,className:"w-full max-w-md mx-auto rounded-lg shadow-lg"}):(0,b.jsx)("div",{className:"w-full max-w-md mx-auto bg-gray-200 rounded-lg shadow-lg flex items-center justify-center",children:(0,b.jsx)(e.BookOpen,{className:"h-24 w-24 text-gray-400"})}),i&&(0,b.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,b.jsxs)("button",{onClick:()=>E("WANT_TO_READ"),disabled:"WANT_TO_READ"===t,className:`w-full flex items-center justify-center space-x-2 py-3 rounded-md transition-colors ${"WANT_TO_READ"===t?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:[(0,b.jsx)(g.Plus,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Want to Read"})]}),(0,b.jsxs)("button",{onClick:()=>E("CURRENTLY_READING"),disabled:"CURRENTLY_READING"===t,className:`w-full flex items-center justify-center space-x-2 py-3 rounded-md transition-colors ${"CURRENTLY_READING"===t?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[(0,b.jsx)(h.CheckCircle,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Currently Reading"})]})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:l.title}),(0,b.jsxs)("p",{className:"text-xl text-gray-600 mb-6",children:["by ",l.author]}),l.publishedDate&&(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["Published: ",l.publishedDate]}),l.pageCount&&(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[l.pageCount," pages"]}),l.description&&(0,b.jsx)("div",{className:"prose max-w-none mb-8",children:(0,b.jsx)("p",{children:l.description})}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Reviews"}),n.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(a=>(0,b.jsx)(f.Star,{className:`h-5 w-5 ${a<=Math.round(0===n.length?0:parseFloat((n.reduce((a,b)=>a+b.rating,0)/n.length).toFixed(1)))?"text-yellow-400 fill-current":"text-gray-300"}`},a))}),(0,b.jsxs)("span",{className:"text-gray-600",children:["(",n.length," reviews)"]})]})]})}),n.length>0&&(0,b.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Rating"}),(0,b.jsxs)("select",{value:x,onChange:a=>y(parseInt(a.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,b.jsx)("option",{value:0,children:"All ratings"}),(0,b.jsx)("option",{value:5,children:"5 stars"}),(0,b.jsx)("option",{value:4,children:"4+ stars"}),(0,b.jsx)("option",{value:3,children:"3+ stars"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort by"}),(0,b.jsxs)("select",{value:z,onChange:a=>A(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,b.jsx)("option",{value:"recent",children:"Most Recent"}),(0,b.jsx)("option",{value:"highest",children:"Highest Rated"}),(0,b.jsx)("option",{value:"lowest",children:"Lowest Rated"})]})]})]}),i&&(0,b.jsxs)("form",{onSubmit:F,className:"mb-8 bg-white rounded-lg shadow p-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Rating"}),(0,b.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(a=>(0,b.jsx)(f.Star,{className:`h-6 w-6 cursor-pointer transition-colors ${r.rating>=a?"text-yellow-400 fill-current":"text-gray-300"}`,onClick:()=>s(b=>({...b,rating:a}))},a))})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{htmlFor:"review-content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Review (Optional)"}),(0,b.jsx)("textarea",{id:"review-content",value:r.content,onChange:a=>s(b=>({...b,content:a.target.value})),placeholder:"Share your thoughts about this book",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-900",rows:4})]}),(0,b.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Submit Review"})]}),0===p.length?(0,b.jsxs)("div",{className:"text-center bg-white rounded-lg shadow p-8",children:[(0,b.jsx)(f.Star,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:0===n.length?"No reviews yet. Be the first to review!":"No reviews match your filter."})]}):(0,b.jsx)("div",{className:"space-y-4",children:p.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsxs)("div",{className:"flex items-center mb-4",children:[(0,b.jsx)("div",{className:"flex space-x-1 mr-4",children:[1,2,3,4,5].map(c=>(0,b.jsx)(f.Star,{className:`h-5 w-5 ${a.rating>=c?"text-yellow-400 fill-current":"text-gray-300"}`},c))}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:new Date(a.createdAt).toLocaleDateString()})]}),a.content&&(0,b.jsx)("p",{className:"text-gray-700 mb-4",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[a.user.image?(0,b.jsx)("img",{src:a.user.image,alt:a.user.name||"User",className:"w-8 h-8 rounded-full object-cover"}):(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-indigo-200 flex items-center justify-center text-indigo-600",children:a.user.name?.[0]||"U"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.user.name||a.user.username||"Anonymous"})]})]},a.id))})]})]})]})})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(e.BookOpen,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Book not found"})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=book-tracker-app_7e677416._.js.map