{"version":3,"sources":["../../../../../book-tracker-app/src/app/search/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { BookOpen, Star, Plus, TrendingUp, Users, Search, Filter, X, Sparkles, ChevronDown, SlidersHorizontal } from 'lucide-react';\nimport Link from 'next/link';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { supabase } from '@/lib/supabase/client';\n\ninterface Book {\n  title: string;\n  author: string;\n  isbn?: string;\n  coverUrl?: string;\n  pageCount?: number;\n  description?: string;\n  genres?: string[];\n  publishedDate?: number;\n}\n\ninterface FilterOptions {\n  genre: string;\n  sortBy: 'relevance' | 'rating' | 'publicationDate' | 'popularity';\n  yearRange: string;\n}\n\nexport default function SearchPage() {\n   const searchParams = useSearchParams();\n   const query = searchParams.get('q') || '';\n   const genre = searchParams.get('genre') || '';\n   const sortBy = (searchParams.get('sort') || 'relevance') as FilterOptions['sortBy'];\n   const yearRange = searchParams.get('year') || '';\n   \n   const [books, setBooks] = useState<Book[]>([]);\n   const [recommendations, setRecommendations] = useState<Book[]>([]);\n   const [loading, setLoading] = useState(false);\n   const [showFilters, setShowFilters] = useState(false);\n   const [inputValue, setInputValue] = useState(query);\n   const [userBooks, setUserBooks] = useState<{ [key: string]: string }>({});\n   const { user } = useAuth();\n   const debounceTimer = useRef<NodeJS.Timeout | null>(null);\n\n  const genres = [\n    'Fiction', 'Non-Fiction', 'Mystery', 'Thriller', 'Romance', 'Science Fiction',\n    'Fantasy', 'Historical', 'Biography', 'Self-Help', 'Business', 'Cooking',\n    'Travel', 'Art & Design', 'Health & Fitness', 'Parenting', 'Science', 'Technology'\n  ];\n\n  const years = ['2024', '2023', '2022', '2021', '2020', '2019', '2018', '2017'];\n\n   useEffect(() => {\n     setInputValue(query);\n   }, [query]);\n\n   useEffect(() => {\n     if (query) {\n       searchBooks();\n     }\n   }, [query, genre, sortBy, yearRange]);\n\n   useEffect(() => {\n     if (user && books.length > 0) {\n       fetchRecommendations();\n     }\n   }, [user, books]);\n\n   useEffect(() => {\n     if (user) {\n       fetchUserBooks();\n     }\n   }, [user]);\n\n  const searchBooks = async () => {\n    setLoading(true);\n    try {\n      let searchUrl = `/api/books/search?q=${encodeURIComponent(query)}`;\n      \n      if (genre) {\n        searchUrl += `&genre=${encodeURIComponent(genre)}`;\n      }\n      \n      if (yearRange) {\n        searchUrl += `&year=${yearRange}`;\n      }\n      \n      if (sortBy !== 'relevance') {\n        searchUrl += `&sort=${sortBy}`;\n      }\n\n      const response = await fetch(searchUrl);\n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to search books');\n      }\n\n      setBooks(data.books || []);\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n   const fetchRecommendations = async () => {\n     try {\n       const { data: { session } } = await supabase.auth.getSession();\n       \n       const headers: Record<string, string> = {\n         'Content-Type': 'application/json',\n       };\n       \n       if (session?.access_token) {\n         headers['Authorization'] = `Bearer ${session.access_token}`;\n       }\n       \n       const response = await fetch('/api/recommendations', { headers });\n       const data = await response.json();\n       \n       if (!response.ok) {\n         throw new Error(data.error || 'Failed to fetch recommendations');\n       }\n\n       setRecommendations(data.recommendations || []);\n     } catch (error) {\n       console.error('Recommendations error:', error);\n     }\n   };\n\n   const fetchUserBooks = async () => {\n     try {\n       const { data: { session } } = await supabase.auth.getSession();\n       \n       if (!session?.access_token) return;\n\n       const response = await fetch('/api/users/books', {\n         headers: {\n           'Authorization': `Bearer ${session.access_token}`,\n         },\n       });\n\n       if (!response.ok) return;\n       \n       const result = await response.json();\n       const bookMap: { [key: string]: string } = {};\n       \n       (result.books || []).forEach((userBook: any) => {\n         bookMap[userBook.book_id] = userBook.id;\n       });\n       \n       setUserBooks(bookMap);\n     } catch (error) {\n       console.error('Error fetching user books:', error);\n     }\n   };\n\n   const handleAddBook = async (book: Book) => {\n     if (!user) return;\n\n     try {\n       const { data: { session } } = await supabase.auth.getSession();\n       \n       if (!session?.access_token) {\n         throw new Error('No authentication token available');\n       }\n\n       const response = await fetch('/api/users/books', {\n         method: 'POST',\n         headers: {\n           'Content-Type': 'application/json',\n           'Authorization': `Bearer ${session.access_token}`,\n         },\n         body: JSON.stringify({\n           bookId: book.isbn || `temp_${book.title}_${Date.now()}`,\n           title: book.title,\n           author: book.author,\n           isbn: book.isbn,\n           coverUrl: book.coverUrl,\n           description: book.description,\n           genres: book.genres,\n           status: 'WANT_TO_READ',\n         }),\n       });\n\n       const data = await response.json();\n\n       if (!response.ok) {\n         const errorMsg = typeof data.error === 'string' ? data.error : JSON.stringify(data.error);\n         throw new Error(errorMsg || 'Failed to add book');\n       }\n\n       const bookId = book.isbn || `temp_${book.title}_${Date.now()}`;\n       setUserBooks(prev => ({ ...prev, [bookId]: data.book.id }));\n       alert(`\"${book.title}\" added to your reading list!`);\n     } catch (error) {\n       const message = error instanceof Error ? error.message : 'Unknown error';\n       console.error('Add book error:', message);\n       alert(`Failed to add book: ${message}`);\n     }\n   };\n\n   const handleChangeStatus = async (book: Book, newStatus: string) => {\n     if (!user) return;\n\n     try {\n       const { data: { session } } = await supabase.auth.getSession();\n       \n       if (!session?.access_token) {\n         throw new Error('No authentication token available');\n       }\n\n       const bookId = book.isbn || `temp_${book.title}_${Date.now()}`;\n       const userBookId = userBooks[bookId];\n\n       if (!userBookId) {\n         throw new Error('Book not found in your library');\n       }\n\n       const response = await fetch('/api/users/books/status', {\n         method: 'PATCH',\n         headers: {\n           'Content-Type': 'application/json',\n           'Authorization': `Bearer ${session.access_token}`,\n         },\n         body: JSON.stringify({\n           userBookId,\n           status: newStatus,\n         }),\n       });\n\n       if (!response.ok) {\n         throw new Error('Failed to update book status');\n       }\n\n       alert(`Book marked as ${newStatus.replace(/_/g, ' ').toLowerCase()}!`);\n     } catch (error) {\n       const message = error instanceof Error ? error.message : 'Unknown error';\n       console.error('Change status error:', message);\n       alert(`Failed to update book: ${message}`);\n     }\n   };\n\n  const getFilterBadgeText = () => {\n    const activeFilters = [genre, sortBy, yearRange].filter(Boolean).length;\n    return activeFilters > 0 ? activeFilters : '';\n  };\n\n  const clearAllFilters = () => {\n    const newParams = new URLSearchParams(searchParams.toString());\n    newParams.delete('genre');\n    newParams.delete('sort');\n    newParams.delete('year');\n    window.location.href = `/search?q=${query}`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-teal-50/30\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"text-center mb-12\">\n          <div className=\"inline-flex items-center space-x-3 mb-6\">\n            <div className=\"relative\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-[#018283] to-[#2CAED8] rounded-2xl flex items-center justify-center shadow-lg\">\n                <Sparkles className=\"h-8 w-8 text-white\" />\n              </div>\n              <div className=\"absolute -inset-1 bg-gradient-to-r from-[#018283]/30 to-[#2CAED8]/30 rounded-2xl blur-lg\"></div>\n            </div>\n            <h1 className=\"text-5xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent\">\n              Discover Your Next Read\n            </h1>\n          </div>\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n            Search our curated collection and get personalized recommendations tailored just for you\n          </p>\n        </div>\n\n        <div className=\"max-w-4xl mx-auto mb-8\">\n          <div className=\"relative group\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-[#018283]/10 to-[#2CAED8]/10 rounded-3xl blur-xl opacity-75 group-hover:opacity-100 transition-opacity duration-300\"></div>\n            <div className=\"relative bg-white/90 backdrop-blur-sm border border-gray-200/50 rounded-3xl shadow-xl overflow-hidden\">\n              <div className=\"flex items-center\">\n                <div className=\"pl-6 pr-2\">\n                  <Search className=\"h-6 w-6 text-gray-400\" />\n                </div>\n                <input\n                   type=\"text\"\n                   value={inputValue}\n                   onChange={(e) => {\n                     setInputValue(e.target.value);\n                     \n                     if (debounceTimer.current) {\n                       clearTimeout(debounceTimer.current);\n                     }\n                     \n                     debounceTimer.current = setTimeout(() => {\n                       const newParams = new URLSearchParams(searchParams.toString());\n                       if (e.target.value) {\n                         newParams.set('q', e.target.value);\n                       } else {\n                         newParams.delete('q');\n                       }\n                       window.location.href = `/search?${newParams.toString()}`;\n                     }, 500);\n                   }}\n                   placeholder=\"Search for books, authors, or ISBN...\"\n                   className=\"flex-1 px-4 py-5 text-lg bg-transparent focus:outline-none placeholder-gray-400 text-gray-900\"\n                 />\n                <div className=\"flex items-center space-x-2 pr-4\">\n                  <button\n                    onClick={() => setShowFilters(!showFilters)}\n                    className={`\n                      relative flex items-center space-x-2 px-5 py-3 rounded-2xl transition-all duration-200\n                      ${showFilters \n                        ? 'bg-gradient-to-r from-[#018283]/10 to-[#2CAED8]/10 text-[#018283] shadow-md' \n                        : 'bg-gray-100/50 text-gray-600 hover:bg-gray-200/50'\n                      }\n                    `}\n                  >\n                    <SlidersHorizontal className=\"h-5 w-5\" />\n                    <span className=\"text-sm font-medium\">Filters</span>\n                    {getFilterBadgeText() && (\n                      <span className=\"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg\">\n                        {getFilterBadgeText()}\n                      </span>\n                    )}\n                  </button>\n                  \n                  <div className=\"relative\">\n                    <select\n                      value={sortBy}\n                      onChange={(e) => {\n                        const newParams = new URLSearchParams(searchParams.toString());\n                        if (e.target.value !== 'relevance') {\n                          newParams.set('sort', e.target.value);\n                        } else {\n                          newParams.delete('sort');\n                        }\n                        window.location.href = `/search?${newParams.toString()}`;\n                      }}\n                      className=\"appearance-none bg-gray-100/50 hover:bg-gray-200/50 text-gray-700 px-5 py-3 pr-10 rounded-2xl focus:outline-none transition-colors duration-200 text-sm font-medium cursor-pointer\"\n                    >\n                      <option value=\"relevance\">Most Relevant</option>\n                      <option value=\"popularity\">Most Popular</option>\n                      <option value=\"rating\">Best Rated</option>\n                      <option value=\"publicationDate\">Newest</option>\n                    </select>\n                    <ChevronDown className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {showFilters && (\n          <div className=\"max-w-4xl mx-auto mb-8\">\n            <div className=\"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-3xl shadow-xl p-8\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Refine Your Search</h3>\n                {(genre || yearRange || sortBy !== 'relevance') && (\n                  <button\n                    onClick={clearAllFilters}\n                    className=\"text-sm text-[#018283] hover:text-[#017374] font-medium transition-colors\"\n                  >\n                    Clear All\n                  </button>\n                )}\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3 flex items-center\">\n                    <Filter className=\"h-4 w-4 mr-2 text-gray-400\" />\n                    Genre\n                  </label>\n                  <div className=\"relative\">\n                    <select\n                      value={genre}\n                      onChange={(e) => {\n                        const newParams = new URLSearchParams(searchParams.toString());\n                        if (e.target.value) {\n                          newParams.set('genre', e.target.value);\n                        } else {\n                          newParams.delete('genre');\n                        }\n                        window.location.href = `/search?${newParams.toString()}`;\n                      }}\n                      className=\"w-full px-4 py-3 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#018283]/20 focus:border-[#018283] transition-all duration-200 appearance-none cursor-pointer\"\n                    >\n                      <option value=\"\">All Genres</option>\n                      {genres.map((g) => (\n                        <option key={g} value={g}>{g}</option>\n                      ))}\n                    </select>\n                    <ChevronDown className=\"absolute right-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none\" />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3\">Publication Year</label>\n                  <div className=\"relative\">\n                    <select\n                      value={yearRange}\n                      onChange={(e) => {\n                        const newParams = new URLSearchParams(searchParams.toString());\n                        if (e.target.value) {\n                          newParams.set('year', e.target.value);\n                        } else {\n                          newParams.delete('year');\n                        }\n                        window.location.href = `/search?${newParams.toString()}`;\n                      }}\n                      className=\"w-full px-4 py-3 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#018283]/20 focus:border-[#018283] transition-all duration-200 appearance-none cursor-pointer\"\n                    >\n                      <option value=\"\">All Years</option>\n                      {years.map((year) => (\n                        <option key={year} value={year}>{year}</option>\n                      ))}\n                    </select>\n                    <ChevronDown className=\"absolute right-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {!query && user && recommendations.length > 0 && (\n          <div className=\"mb-12\">\n            <div className=\"flex items-center mb-8\">\n              <div className=\"relative\">\n                <TrendingUp className=\"h-8 w-8 text-[#018283] mr-3\" />\n                <div className=\"absolute inset-0 bg-[#018283]/20 rounded-lg blur-md -z-10\"></div>\n              </div>\n              <h2 className=\"text-3xl font-bold text-gray-900\">Recommended for You</h2>\n              <div className=\"ml-4 px-3 py-1 bg-gradient-to-r from-[#018283]/10 to-[#2CAED8]/10 rounded-full\">\n                <span className=\"text-sm font-medium text-[#018283]\">AI Curated</span>\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {recommendations.slice(0, 8).map((book, index) => (\n                <div key={index} className=\"group cursor-pointer\">\n                  <div className=\"relative bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-gray-100\">\n                    <div className=\"aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden\">\n                      {book.coverUrl ? (\n                        <img\n                          src={book.coverUrl}\n                          alt={book.title}\n                          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center\">\n                          <div className=\"relative\">\n                            <BookOpen className=\"h-16 w-16 text-gray-400\" />\n                            <div className=\"absolute inset-0 bg-gray-200 rounded-full blur-xl\"></div>\n                          </div>\n                        </div>\n                      )}\n                      <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                    </div>\n                    \n                    <div className=\"p-6\">\n                      <h3 className=\"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-[#018283] transition-colors duration-200\">\n                        {book.title}\n                      </h3>\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-1\">{book.author}</p>\n                      {book.genres && (\n                        <div className=\"flex flex-wrap gap-1 mb-4\">\n                          {book.genres.slice(0, 2).map((genre, genreIndex) => (\n                            <span key={genreIndex} className=\"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\">\n                              {genre}\n                            </span>\n                          ))}\n                        </div>\n                      )}\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => handleAddBook(book)}\n                          className=\"flex-1 flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg group/btn\"\n                          disabled={!user}\n                        >\n                          <Plus className=\"h-4 w-4 mr-2 group-hover/btn:rotate-90 transition-transform duration-300\" />\n                          <span className=\"text-sm font-medium\">\n                            {user ? 'Add to List' : 'Sign in'}\n                          </span>\n                        </button>\n                        <Link\n                          href={`/books/${book.isbn || `temp_${book.title}`}`}\n                          className=\"p-2.5 bg-gray-100 text-gray-600 rounded-2xl hover:bg-gray-200 hover:text-[#018283] transition-all duration-200\"\n                        >\n                          <Star className=\"h-4 w-4\" />\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {books.length > 0 && (\n          <div>\n            <div className=\"flex items-center justify-between mb-8\">\n              <div>\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                  {query ? `Results for \"${query}\"` : 'Discover Books'}\n                </h2>\n                <p className=\"text-lg text-gray-600\">\n                  {books.length} {books.length === 1 ? 'book' : 'books'} found\n                </p>\n              </div>\n              {(genre || yearRange || sortBy !== 'relevance') && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-sm text-gray-500\">Active filters:</span>\n                  <div className=\"flex space-x-2\">\n                    {genre && (\n                      <span className=\"px-3 py-1 bg-[#018283]/10 text-[#018283] text-sm rounded-full font-medium\">\n                        {genre}\n                      </span>\n                    )}\n                    {yearRange && (\n                      <span className=\"px-3 py-1 bg-[#018283]/10 text-[#018283] text-sm rounded-full font-medium\">\n                        {yearRange}\n                      </span>\n                    )}\n                    {sortBy !== 'relevance' && (\n                      <span className=\"px-3 py-1 bg-[#018283]/10 text-[#018283] text-sm rounded-full font-medium\">\n                        {sortBy}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n              {books.map((book, index) => (\n                <div key={index} className=\"group\">\n                  <div className=\"relative bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-3 border border-gray-100\">\n                    <div className=\"aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden\">\n                      {book.coverUrl ? (\n                        <img\n                          src={book.coverUrl}\n                          alt={book.title}\n                          className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center\">\n                          <div className=\"relative\">\n                            <BookOpen className=\"h-20 w-20 text-gray-400\" />\n                            <div className=\"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full blur-2xl\"></div>\n                          </div>\n                        </div>\n                      )}\n                      <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                    </div>\n                    \n                    <div className=\"p-6\">\n                      <h3 className=\"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-[#018283] transition-colors duration-200\">\n                        {book.title}\n                      </h3>\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-1\">{book.author}</p>\n                      \n                      {book.pageCount && (\n                        <p className=\"text-xs text-gray-500 mb-3\">\n                          {book.pageCount} pages â€¢ {book.publishedDate}\n                        </p>\n                      )}\n                      \n                      {book.description && (\n                        <p className=\"text-sm text-gray-700 mb-4 line-clamp-3\">\n                          {book.description}\n                        </p>\n                      )}\n                      \n                       <div className=\"flex items-center space-x-2\">\n                         {userBooks[book.isbn || `temp_${book.title}_${Date.now()}`] ? (\n                           <select\n                             value=\"\"\n                             onChange={(e) => {\n                               if (e.target.value) {\n                                 handleChangeStatus(book, e.target.value);\n                                 e.target.value = '';\n                               }\n                             }}\n                             className=\"flex-1 px-4 py-2.5 text-sm bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg cursor-pointer appearance-none\"\n                           >\n                             <option value=\"\">Change Status</option>\n                             <option value=\"WANT_TO_READ\">Want to Read</option>\n                             <option value=\"CURRENTLY_READING\">Reading</option>\n                             <option value=\"READ\">Read</option>\n                             <option value=\"DNF\">Did Not Finish</option>\n                           </select>\n                         ) : (\n                           <button\n                             onClick={() => handleAddBook(book)}\n                             className=\"flex-1 flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg group/btn disabled:opacity-50 disabled:cursor-not-allowed\"\n                             disabled={!user}\n                           >\n                             <Plus className=\"h-4 w-4 mr-2 group-hover/btn:rotate-90 transition-transform duration-300\" />\n                             <span className=\"text-sm font-medium\">\n                               {user ? 'Add to List' : 'Sign in to Add'}\n                             </span>\n                           </button>\n                         )}\n                         <Link\n                           href={`/books/${book.isbn || `temp_${book.title}`}`}\n                           className=\"p-2.5 bg-gray-100 text-gray-600 rounded-2xl hover:bg-[#018283] hover:text-white transition-all duration-200\"\n                         >\n                           <Star className=\"h-4 w-4\" />\n                         </Link>\n                       </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {loading && (\n          <div className=\"text-center py-20\">\n            <div className=\"relative inline-block mb-8\">\n              <div className=\"w-24 h-24 bg-gradient-to-br from-[#018283]/20 to-[#2CAED8]/20 rounded-3xl flex items-center justify-center\">\n                <div className=\"w-16 h-16 bg-gradient-to-br from-[#018283] to-[#2CAED8] rounded-2xl flex items-center justify-center animate-pulse shadow-lg\">\n                  <Search className=\"h-8 w-8 text-white\" />\n                </div>\n              </div>\n              <div className=\"absolute -inset-4 bg-gradient-to-r from-[#018283]/30 to-[#2CAED8]/30 rounded-3xl blur-xl animate-pulse\"></div>\n            </div>\n            <h3 className=\"text-2xl font-semibold text-gray-900 mb-2\">Searching for books...</h3>\n            <p className=\"text-gray-600\">Finding the perfect matches for you</p>\n            \n            <div className=\"flex justify-center mt-8 space-x-2\">\n              <div className=\"w-2 h-2 bg-[#018283] rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n              <div className=\"w-2 h-2 bg-[#2CAED8] rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n              <div className=\"w-2 h-2 bg-[#018283] rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n            </div>\n          </div>\n        )}\n\n        {!loading && books.length === 0 && (\n          <div className=\"text-center py-20\">\n            <div className=\"relative inline-block mb-8\">\n              <div className=\"w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center\">\n                <div className=\"relative\">\n                  <BookOpen className=\"h-20 w-20 text-gray-400\" />\n                  <div className=\"absolute inset-0 bg-gray-300 rounded-full blur-2xl\"></div>\n                </div>\n              </div>\n              <div className=\"absolute -inset-2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-3xl blur-xl opacity-50\"></div>\n            </div>\n            \n            {query ? (\n              <>\n                <h3 className=\"text-2xl font-semibold text-gray-900 mb-2\">No books found for &quot;{query}&quot;</h3>\n                <p className=\"text-gray-600 mb-8\">Try adjusting your search terms or filters</p>\n                <button\n                  onClick={() => {\n                    const newParams = new URLSearchParams(searchParams.toString());\n                    newParams.delete('q');\n                    window.location.href = `/search?${newParams.toString()}`;\n                  }}\n                  className=\"px-6 py-3 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg inline-flex items-center\"\n                >\n                  <X className=\"h-5 w-5 mr-2\" />\n                  Clear Search\n                </button>\n              </>\n            ) : (\n              <>\n                <h3 className=\"text-2xl font-semibold text-gray-900 mb-2\">Start your book discovery journey</h3>\n                <p className=\"text-gray-600 mb-8\">Search for books, authors, or explore our curated collection</p>\n                <div className=\"flex justify-center space-x-4\">\n                  <Link\n                    href=\"/dashboard\"\n                    className=\"px-6 py-3 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg inline-flex items-center\"\n                  >\n                    <BookOpen className=\"h-5 w-5 mr-2\" />\n                    View Your Dashboard\n                  </Link>\n                  {!user && (\n                    <Link\n                      href=\"/auth/signin\"\n                      className=\"px-6 py-3 bg-white text-[#018283] border-2 border-[#018283] rounded-2xl hover:bg-[#018283]/5 transition-all duration-200 inline-flex items-center font-medium\"\n                    >\n                      Sign In\n                    </Link>\n                  )}\n                </div>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n\n      {!user && books.length > 0 && (\n        <div className=\"fixed bottom-8 left-8 right-8 max-w-4xl mx-auto z-50\">\n          <div className=\"bg-white/95 backdrop-blur-xl border border-gray-200/50 rounded-3xl shadow-2xl p-8 relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-[#018283]/5 to-[#2CAED8]/5\"></div>\n            <div className=\"relative flex items-center justify-between\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center mb-2\">\n                  <div className=\"w-10 h-10 bg-gradient-to-br from-[#018283] to-[#2CAED8] rounded-2xl flex items-center justify-center mr-3 shadow-lg\">\n                    <Sparkles className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold text-gray-900\">Ready to start reading?</h3>\n                </div>\n                <p className=\"text-gray-600\">Sign in to save books to your reading list and get personalized recommendations tailored just for you.</p>\n              </div>\n              <div className=\"flex items-center space-x-3 ml-8\">\n                <Link\n                  href=\"/auth/signin\"\n                  className=\"px-8 py-3.5 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-lg hover:shadow-xl font-medium inline-flex items-center\"\n                >\n                  Sign In\n                  <Plus className=\"h-4 w-4 ml-2\" />\n                </Link>\n                <button\n                  onClick={() => {\n                    const element = document.querySelector('.fixed.bottom-8');\n                    if (element) {\n                      (element as HTMLElement).style.display = 'none';\n                    }\n                  }}\n                  className=\"p-2 text-gray-400 hover:text-gray-600 rounded-xl hover:bg-gray-100 transition-colors duration-200\"\n                >\n                  <X className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n       )}\n     </div>\n   );\n}"],"names":[],"mappings":"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"}