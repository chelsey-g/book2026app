module.exports=[78518,a=>{"use strict";let b=(0,a.i(59129).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],78518)},12722,a=>{"use strict";let b=(0,a.i(59129).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],12722)},56401,a=>{"use strict";let b=(0,a.i(59129).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],56401)},41782,a=>{"use strict";let b=(0,a.i(59129).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],41782)},49541,a=>{"use strict";let b=(0,a.i(59129).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);a.s(["Upload",()=>b],49541)},37911,a=>{"use strict";var b=a.i(86531),c=a.i(52715),d=a.i(14366),e=a.i(1791),f=a.i(75662),g=a.i(20607),h=a.i(78518),i=a.i(59129);let j=(0,i.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var k=a.i(12235);let l=(0,i.default)("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),m=(0,i.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var n=a.i(56401),o=a.i(12722),p=a.i(41782),q=a.i(49541);function r(){let{user:a}=(0,d.useAuth)(),[i,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)("WANT_TO_READ"),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)("date-added"),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),G=[{id:"WANT_TO_READ",label:"Want to Read",color:"bg-blue-50"},{id:"CURRENTLY_READING",label:"Currently Reading",color:"bg-green-50"},{id:"READ",label:"Read",color:"bg-purple-50"},{id:"DNF",label:"Did Not Finish",color:"bg-red-50"}];(0,c.useEffect)(()=>{a&&H()},[a]),(0,c.useEffect)(()=>{I()},[i,w,y,A]);let H=async()=>{try{let{data:{session:a}}=await e.supabase.auth.getSession();if(!a?.access_token)throw Error("No authentication token available");let b=await fetch("/api/users/books",{headers:{Authorization:`Bearer ${a.access_token}`}});if(!b.ok)throw Error("Failed to fetch books");let c=await b.json();r(c.books||[])}catch(a){console.error("Error fetching user books:",a)}finally{v(!1)}},I=()=>{let a=i.filter(a=>a.status===w);y&&(a=a.filter(a=>a.books?.title?.toLowerCase().includes(y.toLowerCase())||a.books?.author?.toLowerCase().includes(y.toLowerCase()))),a.sort((a,b)=>"date-added"===A?new Date(b.created_at).getTime()-new Date(a.created_at).getTime():"title"===A?(a.books?.title||"").localeCompare(b.books?.title||""):"author"===A?(a.books?.author||"").localeCompare(b.books?.author||""):0),t(a)},J=async a=>{try{let{data:{session:b}}=await e.supabase.auth.getSession();if(!b?.access_token)throw Error("No authentication token available");if(!(await fetch(`/api/users/books/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b.access_token}`}})).ok)throw Error("Failed to delete book");r(i.filter(b=>b.id!==a))}catch(a){console.error("Error deleting book:",a),alert("Failed to delete book")}},K=async(a,b)=>{try{let{data:{session:c}}=await e.supabase.auth.getSession();if(!c?.access_token)throw Error("No authentication token available");let d=await fetch("/api/users/books/status",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.access_token}`},body:JSON.stringify({userBookId:a,status:b})});if(!d.ok)throw Error("Failed to update book status");let f=await d.json();r(i.map(b=>b.id===a?f.book:b))}catch(a){console.error("Error updating book status:",a),alert("Failed to update book status")}},L=async(a,b)=>{try{let{data:{session:c}}=await e.supabase.auth.getSession();if(!c?.access_token)throw Error("No authentication token available");let d=await fetch("/api/users/books/rating",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.access_token}`},body:JSON.stringify({userBookId:a,rating:b})});if(!d.ok)throw Error("Failed to update rating");let f=await d.json();r(i.map(b=>b.id===a?f.book:b))}catch(a){console.error("Error updating rating:",a),alert("Failed to update rating")}},M=G.map(a=>({...a,count:i.filter(b=>b.status===a.id).length})),N=({status:a})=>{switch(a){case"WANT_TO_READ":return(0,b.jsx)(l,{className:"w-4 h-4 text-blue-500"});case"CURRENTLY_READING":return(0,b.jsx)(o.Clock,{className:"w-4 h-4 text-emerald-500"});case"READ":return(0,b.jsx)(n.CheckCircle,{className:"w-4 h-4 text-purple-500"});case"DNF":return(0,b.jsx)(p.XCircle,{className:"w-4 h-4 text-red-500"});default:return(0,b.jsx)(m,{className:"w-4 h-4 text-gray-400"})}};return a?u?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-teal-50/30 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin mb-4",children:(0,b.jsx)(g.BookOpen,{className:"w-12 h-12 text-[#018283]"})}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading your books..."})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-teal-50/30",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"My Books"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage and organize your reading library"})]}),(0,b.jsxs)(f.default,{href:"/import-books",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#018283] text-white rounded-lg hover:bg-[#017374] transition-colors self-start",children:[(0,b.jsx)(q.Upload,{className:"w-5 h-5"}),"Import from Notion"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:M.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-[#018283]",children:a.count}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:a.label})]},a.id))}),(0,b.jsx)("div",{className:"flex space-x-4 mb-6 border-b border-gray-200",children:G.map(a=>(0,b.jsxs)("button",{onClick:()=>x(a.id),className:`px-4 py-3 font-medium border-b-2 transition-colors ${w===a.id?"border-[#018283] text-[#018283]":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[a.label,(0,b.jsx)("span",{className:"ml-2 text-sm bg-gray-100 px-2 py-1 rounded-full",children:M.find(b=>b.id===a.id)?.count||0})]},a.id))}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by title or author...",value:y,onChange:a=>z(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#018283] focus:border-transparent text-gray-900"})]}),(0,b.jsxs)("select",{value:A,onChange:a=>B(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#018283] focus:border-transparent",children:[(0,b.jsx)("option",{value:"date-added",children:"Recently Added"}),(0,b.jsx)("option",{value:"title",children:"Title A-Z"}),(0,b.jsx)("option",{value:"author",children:"Author A-Z"})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200",children:s.length>0?(0,b.jsx)("div",{className:"w-full",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Title"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Author"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Rating"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Date Started"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Date Finished"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:s.map((a,c)=>(0,b.jsxs)("tr",{className:`border-b border-gray-200 hover:bg-gray-50 transition-colors ${c%2==0?"bg-white":"bg-gray-50/50"}`,children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)(f.default,{href:`/books/${a.books?.isbn||a.book_id}`,className:"text-[#018283] hover:underline font-medium flex items-center gap-3",children:[a.books?.cover_url?(0,b.jsx)("img",{src:a.books.cover_url,alt:a.books.title,className:"w-8 h-12 object-cover rounded"}):(0,b.jsx)("div",{className:"w-8 h-12 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(g.BookOpen,{className:"w-4 h-4 text-gray-400"})}),(0,b.jsx)("span",{children:a.books?.title})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-700",children:a.books?.author}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"flex items-center gap-1 cursor-pointer",onMouseEnter:()=>F(a.id),onMouseLeave:()=>F(null),children:(0,b.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(c=>(0,b.jsx)(h.Star,{onClick:()=>L(a.id,c),className:`w-4 h-4 cursor-pointer transition-all ${E===a.id?c<=(a.rating||0)?"text-yellow-400 fill-current":"text-gray-300 hover:text-yellow-300":c<=(a.rating||0)?"text-yellow-400 fill-current":"text-gray-300"}`},c))})})}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-500 text-sm",children:a.started_at?new Date(a.started_at).toLocaleDateString():"-"}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-500 text-sm",children:a.completed_at?new Date(a.completed_at).toLocaleDateString():"-"}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 relative z-20",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>D(C===a.id?null:a.id),className:"flex items-center gap-1.5 px-3 py-2 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md hover:border-[#2CAED8] transition-all duration-200",children:[(0,b.jsx)(N,{status:a.status}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(a=>{switch(a){case"WANT_TO_READ":return"Want to Read";case"CURRENTLY_READING":return"Reading";case"READ":return"Read";case"DNF":return"Did Not Finish";default:return a}})(a.status)}),(0,b.jsx)("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 flex-shrink-0 ${C===a.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]}),C===a.id&&(0,b.jsx)("div",{className:"absolute top-full right-0 mt-1 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[{value:"WANT_TO_READ",label:"Want to Read",color:"text-blue-600",bgColor:"bg-blue-50"},{value:"CURRENTLY_READING",label:"Currently Reading",color:"text-emerald-600",bgColor:"bg-emerald-50"},{value:"READ",label:"Read",color:"text-purple-600",bgColor:"bg-purple-50"},{value:"DNF",label:"Did Not Finish",color:"text-red-600",bgColor:"bg-red-50"}].map(c=>(0,b.jsxs)("button",{onClick:()=>{K(a.id,c.value),D(null)},className:`w-full px-3 py-2 flex items-center gap-2 text-sm hover:bg-gray-50 transition-colors ${a.status===c.value?c.bgColor:""}`,children:[(0,b.jsx)(N,{status:c.value}),(0,b.jsx)("span",{className:`font-medium ${a.status===c.value?c.color:"text-gray-700"}`,children:c.label}),a.status===c.value&&(0,b.jsx)(n.CheckCircle,{className:"w-4 h-4 text-[#018283] ml-auto"})]},c.value))})]}),(0,b.jsx)("button",{onClick:()=>J(a.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 group flex-shrink-0",title:"Delete book",children:(0,b.jsx)(j,{className:"w-4 h-4 group-hover:scale-110 transition-transform"})})]})})]},a.id))})]})}):(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-6",children:(0,b.jsx)(g.BookOpen,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No books on this shelf yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4 max-w-sm mx-auto",children:"WANT_TO_READ"===w?"Start building your reading list by discovering books":"CURRENTLY_READING"===w?"Begin a book to add it to your currently reading shelf":"READ"===w?"Mark books as read to see them here":"Books you haven't finished will appear here"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,b.jsx)(f.default,{href:"/discover",className:"px-6 py-3 bg-[#018283] text-white rounded-lg hover:bg-[#017374] transition-colors font-medium",children:"Discover Books"}),(0,b.jsx)(f.default,{href:"/import-books",className:"px-6 py-3 bg-gray-200 text-gray-900 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Import from Notion"})]})]})})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-teal-50/30 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(g.BookOpen,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Please sign in"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to view your books"}),(0,b.jsx)(f.default,{href:"/auth/signin",className:"px-6 py-3 bg-[#018283] text-white rounded-lg hover:bg-[#017374] transition-colors",children:"Sign In"})]})})}a.s(["default",()=>r],37911)}];

//# sourceMappingURL=book-tracker-app_d1a9016a._.js.map