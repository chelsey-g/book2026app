{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/chelseygowac/book-tracker-app/src/app/discover/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { BookOpen, Star, Plus, TrendingUp, Users, Search, Filter, X, Sparkles, ChevronDown, SlidersHorizontal, Flame, Loader, Target } from 'lucide-react';\nimport Link from 'next/link';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { supabase } from '@/lib/supabase/client';\n\ninterface Book {\n  id?: string;\n  title: string;\n  author: string;\n  isbn?: string;\n  coverUrl?: string;\n  cover_url?: string;\n  pageCount?: number;\n  description?: string;\n  genres?: string[];\n  publishedDate?: number;\n  trendingScore?: number;\n  type?: string;\n}\n\ninterface FilterOptions {\n  genre: string;\n  sortBy: 'relevance' | 'rating' | 'publicationDate' | 'popularity';\n  yearRange: string;\n}\n\nexport default function DiscoverPage() {\n  const searchParams = useSearchParams();\n  const query = searchParams.get('q') || '';\n  const genre = searchParams.get('genre') || '';\n  const sortBy = (searchParams.get('sort') || 'relevance') as FilterOptions['sortBy'];\n  const yearRange = searchParams.get('year') || '';\n\n  const [books, setBooks] = useState<Book[]>([]);\n  const [recommendations, setRecommendations] = useState<Book[]>([]);\n  const [trending, setTrending] = useState<Book[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [showFilters, setShowFilters] = useState(false);\n  const [inputValue, setInputValue] = useState(query);\n  const [userBooks, setUserBooks] = useState<{ [key: string]: string }>({});\n  const [timeframe, setTimeframe] = useState('all');\n  const [searchError, setSearchError] = useState('');\n  const { user } = useAuth();\n  const debounceTimer = useRef<NodeJS.Timeout | null>(null);\n\n  const genres = [\n    'Fiction', 'Non-Fiction', 'Mystery', 'Thriller', 'Romance', 'Science Fiction',\n    'Fantasy', 'Historical', 'Biography', 'Self-Help', 'Business', 'Cooking',\n    'Travel', 'Art & Design', 'Health & Fitness', 'Parenting', 'Science', 'Technology'\n  ];\n\n  const years = ['2024', '2023', '2022', '2021', '2020', '2019', '2018', '2017'];\n\n  useEffect(() => {\n    setInputValue(query);\n  }, [query]);\n\n  useEffect(() => {\n    if (query) {\n      searchBooks();\n    } else {\n      // Load initial content when no search query\n      fetchInitialContent();\n    }\n  }, [query, genre, sortBy, yearRange]);\n\n  useEffect(() => {\n    if (user) {\n      fetchUserBooks();\n      fetchRecommendations();\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (user) {\n      fetchTrendingBooks();\n    }\n  }, [user, timeframe]);\n\n  const fetchInitialContent = async () => {\n    if (user) {\n      // Fetch recommendations and trending for signed-in users\n      await Promise.all([fetchRecommendations(), fetchTrendingBooks()]);\n    } else {\n      // Fetch trending books for non-signed-in users\n      await fetchTrendingBooks();\n    }\n  };\n\n  const searchBooks = async () => {\n    setLoading(true);\n    try {\n      let searchUrl = `/api/books/search?q=${encodeURIComponent(query)}`;\n\n      if (genre) {\n        searchUrl += `&genre=${encodeURIComponent(genre)}`;\n      }\n\n      if (yearRange) {\n        searchUrl += `&year=${yearRange}`;\n      }\n\n      if (sortBy !== 'relevance') {\n        searchUrl += `&sort=${sortBy}`;\n      }\n\n      const response = await fetch(searchUrl);\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to search books');\n      }\n\n      setBooks(data.books || []);\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchRecommendations = async () => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n\n      const headers: Record<string, string> = {\n        'Content-Type': 'application/json',\n      };\n\n      if (session?.access_token) {\n        headers['Authorization'] = `Bearer ${session.access_token}`;\n      }\n\n      const response = await fetch('/api/recommendations', { headers });\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to fetch recommendations');\n      }\n\n      setRecommendations(data.recommendations || []);\n    } catch (error) {\n      console.error('Recommendations error:', error);\n    }\n  };\n\n  const fetchTrendingBooks = async () => {\n    try {\n      const response = await fetch(`/api/books/popular?limit=12&timeframe=${timeframe}`);\n      const data = await response.json();\n      setTrending(data.books || []);\n    } catch (error) {\n      console.error('Trending books error:', error);\n    }\n  };\n\n  const fetchUserBooks = async () => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n\n      if (!session?.access_token) return;\n\n      const response = await fetch('/api/users/books', {\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n      });\n\n      if (!response.ok) return;\n\n      const result = await response.json();\n      const bookMap: { [key: string]: string } = {};\n\n      (result.books || []).forEach((userBook: any) => {\n        bookMap[userBook.book_id] = userBook.id;\n      });\n\n      setUserBooks(bookMap);\n    } catch (error) {\n      console.error('Error fetching user books:', error);\n    }\n  };\n\n  const handleAddBook = async (book: Book) => {\n    if (!user) return;\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n\n      if (!session?.access_token) {\n        throw new Error('No authentication token available');\n      }\n\n      const response = await fetch('/api/users/books', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n        body: JSON.stringify({\n          bookId: book.id || book.isbn || `temp_${book.title}_${Date.now()}`,\n          title: book.title,\n          author: book.author,\n          isbn: book.isbn,\n          coverUrl: book.coverUrl || book.cover_url,\n          description: book.description,\n          genres: book.genres,\n          status: 'WANT_TO_READ',\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        const errorMsg = typeof data.error === 'string' ? data.error : JSON.stringify(data.error);\n        throw new Error(errorMsg || 'Failed to add book');\n      }\n\n      const bookId = book.id || book.isbn || `temp_${book.title}_${Date.now()}`;\n      setUserBooks(prev => ({ ...prev, [bookId]: data.book.id }));\n      alert(`\"${book.title}\" added to your reading list!`);\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Unknown error';\n      console.error('Add book error:', message);\n      alert(`Failed to add book: ${message}`);\n    }\n  };\n\n  const handleChangeStatus = async (book: Book, newStatus: string) => {\n    if (!user) return;\n\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n\n      if (!session?.access_token) {\n        throw new Error('No authentication token available');\n      }\n\n      const bookId = book.id || book.isbn || `temp_${book.title}_${Date.now()}`;\n      const userBookId = userBooks[bookId];\n\n      if (!userBookId) {\n        throw new Error('Book not found in your library');\n      }\n\n      const response = await fetch('/api/users/books/status', {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${session.access_token}`,\n        },\n        body: JSON.stringify({\n          userBookId,\n          status: newStatus,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update book status');\n      }\n\n      alert(`Book marked as ${newStatus.replace(/_/g, ' ').toLowerCase()}!`);\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Unknown error';\n      console.error('Change status error:', message);\n      alert(`Failed to update book: ${message}`);\n    }\n  };\n\n  const getFilterBadgeText = () => {\n    const activeFilters = [genre, sortBy, yearRange].filter(Boolean).length;\n    return activeFilters > 0 ? activeFilters : '';\n  };\n\n  const clearAllFilters = () => {\n    const newParams = new URLSearchParams(searchParams.toString());\n    newParams.delete('genre');\n    newParams.delete('sort');\n    newParams.delete('year');\n    window.location.href = `/discover?q=${query}`;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-teal-50/30\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"text-center mb-12\">\n          <div className=\"inline-flex items-center space-x-3 mb-6\">\n            <div className=\"relative\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-[#018283] to-[#2CAED8] rounded-2xl flex items-center justify-center shadow-lg\">\n                <Sparkles className=\"h-8 w-8 text-white\" />\n              </div>\n              <div className=\"absolute -inset-1 bg-gradient-to-r from-[#018283]/30 to-[#2CAED8]/30 rounded-2xl blur-lg\"></div>\n            </div>\n            <h1 className=\"text-5xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent\">\n              Discover Your Next Read\n            </h1>\n          </div>\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n            Search our curated collection, get personalized recommendations, and explore trending books\n          </p>\n        </div>\n\n        {/* Search Bar */}\n        <div className=\"max-w-4xl mx-auto mb-8\">\n          <div className=\"relative group\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-[#018283]/10 to-[#2CAED8]/10 rounded-3xl blur-xl opacity-75 group-hover:opacity-100 transition-opacity duration-300\"></div>\n            <div className=\"relative bg-white/90 backdrop-blur-sm border border-gray-200/50 rounded-3xl shadow-xl overflow-hidden\">\n              <div className=\"flex items-center\">\n                <div className=\"pl-6 pr-2\">\n                  <Search className=\"h-6 w-6 text-gray-400\" />\n                </div>\n                <input\n                   type=\"text\"\n                   value={inputValue}\n                   onChange={(e) => {\n                     setInputValue(e.target.value);\n                     setSearchError('');\n\n                     if (debounceTimer.current) {\n                       clearTimeout(debounceTimer.current);\n                     }\n\n                     debounceTimer.current = setTimeout(() => {\n                       if (e.target.value.trim()) {\n                         const newParams = new URLSearchParams(searchParams.toString());\n                         newParams.set('q', e.target.value);\n                         window.location.href = `/discover?${newParams.toString()}`;\n                       } else {\n                         setSearchError('');\n                       }\n                     }, 500);\n                   }}\n                   onKeyDown={(e) => {\n                     if (e.key === 'Enter' && !inputValue.trim()) {\n                       setSearchError('Please enter a search term');\n                       e.preventDefault();\n                     }\n                   }}\n                   placeholder=\"Search for books, authors, or ISBN...\"\n                   className=\"flex-1 px-4 py-5 text-lg bg-transparent focus:outline-none placeholder-gray-400 text-gray-900\"\n                 />\n                <div className=\"flex items-center space-x-2 pr-4\">\n                  <button\n                    onClick={() => setShowFilters(!showFilters)}\n                    className={`\n                      relative flex items-center space-x-2 px-5 py-3 rounded-2xl transition-all duration-200\n                      ${showFilters\n                        ? 'bg-gradient-to-r from-[#018283]/10 to-[#2CAED8]/10 text-[#018283] shadow-md'\n                        : 'bg-gray-100/50 text-gray-600 hover:bg-gray-200/50'\n                      }\n                    `}\n                  >\n                    <SlidersHorizontal className=\"h-5 w-5\" />\n                    <span className=\"text-sm font-medium\">Filters</span>\n                    {getFilterBadgeText() && (\n                      <span className=\"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg\">\n                        {getFilterBadgeText()}\n                      </span>\n                    )}\n                  </button>\n\n                  <div className=\"relative\">\n                    <select\n                      value={sortBy}\n                      onChange={(e) => {\n                        const newParams = new URLSearchParams(searchParams.toString());\n                        if (e.target.value !== 'relevance') {\n                          newParams.set('sort', e.target.value);\n                        } else {\n                          newParams.delete('sort');\n                        }\n                        window.location.href = `/discover?${newParams.toString()}`;\n                      }}\n                      className=\"appearance-none bg-gray-100/50 hover:bg-gray-200/50 text-gray-700 px-5 py-3 pr-10 rounded-2xl focus:outline-none transition-colors duration-200 text-sm font-medium cursor-pointer\"\n                    >\n                      <option value=\"relevance\">Most Relevant</option>\n                      <option value=\"popularity\">Most Popular</option>\n                      <option value=\"rating\">Best Rated</option>\n                      <option value=\"publicationDate\">Newest</option>\n                    </select>\n                    <ChevronDown className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none\" />\n                  </div>\n                </div>\n              </div>\n             </div>\n             {searchError && (\n               <div className=\"mt-3 text-sm text-red-600 flex items-center gap-2\">\n                 <span>⚠️</span>\n                 <span>{searchError}</span>\n               </div>\n             )}\n           </div>\n         </div>\n\n         {/* Filters */}\n        {showFilters && (\n          <div className=\"max-w-4xl mx-auto mb-8\">\n            <div className=\"bg-white/80 backdrop-blur-sm border border-gray-200/50 rounded-3xl shadow-xl p-8\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Refine Your Search</h3>\n                {(genre || yearRange || sortBy !== 'relevance') && (\n                  <button\n                    onClick={clearAllFilters}\n                    className=\"text-sm text-[#018283] hover:text-[#017374] font-medium transition-colors\"\n                  >\n                    Clear All\n                  </button>\n                )}\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3 flex items-center\">\n                    <Filter className=\"h-4 w-4 mr-2 text-gray-400\" />\n                    Genre\n                  </label>\n                  <div className=\"relative\">\n                    <select\n                      value={genre}\n                      onChange={(e) => {\n                        const newParams = new URLSearchParams(searchParams.toString());\n                        if (e.target.value) {\n                          newParams.set('genre', e.target.value);\n                        } else {\n                          newParams.delete('genre');\n                        }\n                        window.location.href = `/discover?${newParams.toString()}`;\n                      }}\n                      className=\"w-full px-4 py-3 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#018283]/20 focus:border-[#018283] transition-all duration-200 appearance-none cursor-pointer\"\n                    >\n                      <option value=\"\">All Genres</option>\n                      {genres.map((g) => (\n                        <option key={g} value={g}>{g}</option>\n                      ))}\n                    </select>\n                    <ChevronDown className=\"absolute right-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none\" />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3\">Publication Year</label>\n                  <div className=\"relative\">\n                    <select\n                      value={yearRange}\n                      onChange={(e) => {\n                        const newParams = new URLSearchParams(searchParams.toString());\n                        if (e.target.value) {\n                          newParams.set('year', e.target.value);\n                        } else {\n                          newParams.delete('year');\n                        }\n                        window.location.href = `/discover?${newParams.toString()}`;\n                      }}\n                      className=\"w-full px-4 py-3 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#018283]/20 focus:border-[#018283] transition-all duration-200 appearance-none cursor-pointer\"\n                    >\n                      <option value=\"\">All Years</option>\n                      {years.map((year) => (\n                        <option key={year} value={year}>{year}</option>\n                      ))}\n                    </select>\n                    <ChevronDown className=\"absolute right-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Main Content */}\n        {!query && user && recommendations.length > 0 && (\n          <div className=\"mb-12\">\n            <div className=\"flex items-center mb-8\">\n              <div className=\"relative\">\n                <TrendingUp className=\"h-8 w-8 text-[#018283] mr-3\" />\n                <div className=\"absolute inset-0 bg-[#018283]/20 rounded-lg blur-md -z-10\"></div>\n              </div>\n              <h2 className=\"text-3xl font-bold text-gray-900\">Recommended for You</h2>\n              <div className=\"ml-4 px-3 py-1 bg-gradient-to-r from-[#018283]/10 to-[#2CAED8]/10 rounded-full\">\n                <span className=\"text-sm font-medium text-[#018283]\">AI Curated</span>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {recommendations.slice(0, 8).map((book, index) => (\n                <div key={index} className=\"group cursor-pointer\">\n                  <div className=\"relative bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-gray-100\">\n                    <div className=\"aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden\">\n                      {book.coverUrl || book.cover_url ? (\n                        <img\n                          src={book.coverUrl || book.cover_url}\n                          alt={book.title}\n                          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center\">\n                          <div className=\"relative\">\n                            <BookOpen className=\"h-16 w-16 text-gray-400\" />\n                            <div className=\"absolute inset-0 bg-gray-200 rounded-full blur-xl\"></div>\n                          </div>\n                        </div>\n                      )}\n                      <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                    </div>\n\n                    <div className=\"p-6\">\n                      <h3 className=\"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-[#018283] transition-colors duration-200\">\n                        {book.title}\n                      </h3>\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-1\">{book.author}</p>\n                      {book.genres && (\n                        <div className=\"flex flex-wrap gap-1 mb-4\">\n                          {book.genres.slice(0, 2).map((genre, genreIndex) => (\n                            <span key={genreIndex} className=\"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\">\n                              {genre}\n                            </span>\n                          ))}\n                        </div>\n                      )}\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => handleAddBook(book)}\n                          className=\"flex-1 flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg group/btn\"\n                          disabled={!user}\n                        >\n                          <Plus className=\"h-4 w-4 mr-2 group-hover/btn:rotate-90 transition-transform duration-300\" />\n                          <span className=\"text-sm font-medium\">\n                            {user ? 'Add to List' : 'Sign in'}\n                          </span>\n                        </button>\n                        <Link\n                          href={`/books/${book.id || book.isbn || `temp_${book.title}`}`}\n                          className=\"p-2.5 bg-gray-100 text-gray-600 rounded-2xl hover:bg-gray-200 hover:text-[#018283] transition-all duration-200\"\n                        >\n                          <Star className=\"h-4 w-4\" />\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Trending Books */}\n        {!query && trending.length > 0 && (\n          <div className=\"mb-12\">\n            <div className=\"flex items-center justify-between mb-8\">\n              <div className=\"flex items-center gap-2\">\n                <Flame className=\"h-8 w-8 text-orange-500\" />\n                <h2 className=\"text-3xl font-bold text-gray-900\">Trending Now</h2>\n              </div>\n\n              <div className=\"flex gap-2\">\n                {['all', 'month', 'week'].map((tf) => (\n                  <button\n                    key={tf}\n                    onClick={() => setTimeframe(tf)}\n                    className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                      timeframe === tf\n                        ? 'bg-[#018283] text-white'\n                        : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n                    }`}\n                  >\n                    {tf === 'all' ? 'All Time' : tf === 'month' ? 'This Month' : 'This Week'}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {trending.slice(0, 8).map((book, index) => (\n                <div key={index} className=\"group cursor-pointer\">\n                  <div className=\"relative bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-gray-100\">\n                    <div className=\"aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden\">\n                      {book.coverUrl || book.cover_url ? (\n                        <img\n                          src={book.coverUrl || book.cover_url}\n                          alt={book.title}\n                          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center\">\n                          <div className=\"relative\">\n                            <BookOpen className=\"h-16 w-16 text-gray-400\" />\n                            <div className=\"absolute inset-0 bg-gray-200 rounded-full blur-xl\"></div>\n                          </div>\n                        </div>\n                      )}\n                      <div className=\"absolute top-3 right-3 bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-bold shadow-lg\">\n                        #{index + 1}\n                      </div>\n                      <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                    </div>\n\n                    <div className=\"p-6\">\n                      <h3 className=\"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-[#018283] transition-colors duration-200\">\n                        {book.title}\n                      </h3>\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-1\">{book.author}</p>\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => handleAddBook(book)}\n                          className=\"flex-1 flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg group/btn\"\n                          disabled={!user}\n                        >\n                          <Plus className=\"h-4 w-4 mr-2 group-hover/btn:rotate-90 transition-transform duration-300\" />\n                          <span className=\"text-sm font-medium\">\n                            {user ? 'Add to List' : 'Sign in'}\n                          </span>\n                        </button>\n                        <Link\n                          href={`/books/${book.id || book.isbn || `temp_${book.title}`}`}\n                          className=\"p-2.5 bg-gray-100 text-gray-600 rounded-2xl hover:bg-gray-200 hover:text-[#018283] transition-all duration-200\"\n                        >\n                          <Star className=\"h-4 w-4\" />\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Search Results */}\n        {books.length > 0 && (\n          <div>\n            <div className=\"flex items-center justify-between mb-8\">\n              <div>\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                  {query ? `Results for \"${query}\"` : 'Discover Books'}\n                </h2>\n                <p className=\"text-lg text-gray-600\">\n                  {books.length} {books.length === 1 ? 'book' : 'books'} found\n                </p>\n              </div>\n              {(genre || yearRange || sortBy !== 'relevance') && (\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-sm text-gray-500\">Active filters:</span>\n                  <div className=\"flex space-x-2\">\n                    {genre && (\n                      <span className=\"px-3 py-1 bg-[#018283]/10 text-[#018283] text-sm rounded-full font-medium\">\n                        {genre}\n                      </span>\n                    )}\n                    {yearRange && (\n                      <span className=\"px-3 py-1 bg-[#018283]/10 text-[#018283] text-sm rounded-full font-medium\">\n                        {yearRange}\n                      </span>\n                    )}\n                    {sortBy !== 'relevance' && (\n                      <span className=\"px-3 py-1 bg-[#018283]/10 text-[#018283] text-sm rounded-full font-medium\">\n                        {sortBy}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8\">\n              {books.map((book, index) => (\n                <div key={index} className=\"group\">\n                  <div className=\"relative bg-white/80 backdrop-blur-sm rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-3 border border-gray-100\">\n                    <div className=\"aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden\">\n                      {book.coverUrl ? (\n                        <img\n                          src={book.coverUrl}\n                          alt={book.title}\n                          className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center\">\n                          <div className=\"relative\">\n                            <BookOpen className=\"h-20 w-20 text-gray-400\" />\n                            <div className=\"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 rounded-full blur-2xl\"></div>\n                          </div>\n                        </div>\n                      )}\n                      <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                    </div>\n\n                    <div className=\"p-6\">\n                      <h3 className=\"font-bold text-gray-900 text-lg mb-2 line-clamp-2 group-hover:text-[#018283] transition-colors duration-200\">\n                        {book.title}\n                      </h3>\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-1\">{book.author}</p>\n\n                      {book.pageCount && (\n                        <p className=\"text-xs text-gray-500 mb-3\">\n                          {book.pageCount} pages • {book.publishedDate}\n                        </p>\n                      )}\n\n                      {book.description && (\n                        <p className=\"text-sm text-gray-700 mb-4 line-clamp-3\">\n                          {book.description}\n                        </p>\n                      )}\n\n                      <div className=\"flex items-center space-x-2\">\n                        {userBooks[book.isbn || `temp_${book.title}_${Date.now()}`] ? (\n                          <select\n                            value=\"\"\n                            onChange={(e) => {\n                              if (e.target.value) {\n                                handleChangeStatus(book, e.target.value);\n                                e.target.value = '';\n                              }\n                            }}\n                            className=\"flex-1 px-4 py-2.5 text-sm bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg cursor-pointer appearance-none\"\n                          >\n                            <option value=\"\">Change Status</option>\n                            <option value=\"WANT_TO_READ\">Want to Read</option>\n                            <option value=\"CURRENTLY_READING\">Reading</option>\n                            <option value=\"READ\">Read</option>\n                            <option value=\"DNF\">Did Not Finish</option>\n                          </select>\n                        ) : (\n                          <button\n                            onClick={() => handleAddBook(book)}\n                            className=\"flex-1 flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg group/btn disabled:opacity-50 disabled:cursor-not-allowed\"\n                            disabled={!user}\n                          >\n                            <Plus className=\"h-4 w-4 mr-2 group-hover/btn:rotate-90 transition-transform duration-300\" />\n                            <span className=\"text-sm font-medium\">\n                              {user ? 'Add to List' : 'Sign in to Add'}\n                            </span>\n                          </button>\n                        )}\n                        <Link\n                          href={`/books/${book.isbn || `temp_${book.title}`}`}\n                          className=\"p-2.5 bg-gray-100 text-gray-600 rounded-2xl hover:bg-[#018283] hover:text-white transition-all duration-200\"\n                        >\n                          <Star className=\"h-4 w-4\" />\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Loading State */}\n        {loading && (\n          <div className=\"text-center py-20\">\n            <div className=\"relative inline-block mb-8\">\n              <div className=\"w-24 h-24 bg-gradient-to-br from-[#018283]/20 to-[#2CAED8]/20 rounded-3xl flex items-center justify-center\">\n                <div className=\"w-16 h-16 bg-gradient-to-br from-[#018283] to-[#2CAED8] rounded-2xl flex items-center justify-center animate-pulse shadow-lg\">\n                  <Search className=\"h-8 w-8 text-white\" />\n                </div>\n              </div>\n              <div className=\"absolute -inset-4 bg-gradient-to-r from-[#018283]/30 to-[#2CAED8]/30 rounded-3xl blur-xl animate-pulse\"></div>\n            </div>\n            <h3 className=\"text-2xl font-semibold text-gray-900 mb-2\">Searching for books...</h3>\n            <p className=\"text-gray-600\">Finding the perfect matches for you</p>\n\n            <div className=\"flex justify-center mt-8 space-x-2\">\n              <div className=\"w-2 h-2 bg-[#018283] rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n              <div className=\"w-2 h-2 bg-[#2CAED8] rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n              <div className=\"w-2 h-2 bg-[#018283] rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n            </div>\n          </div>\n        )}\n\n        {/* Empty State */}\n        {!loading && books.length === 0 && !query && (!trending.length || !user) && (\n          <div className=\"text-center py-20\">\n            <div className=\"relative inline-block mb-8\">\n              <div className=\"w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center\">\n                <div className=\"relative\">\n                  <BookOpen className=\"h-20 w-20 text-gray-400\" />\n                  <div className=\"absolute inset-0 bg-gray-300 rounded-full blur-2xl\"></div>\n                </div>\n              </div>\n              <div className=\"absolute -inset-2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-3xl blur-xl opacity-50\"></div>\n            </div>\n\n            <h3 className=\"text-2xl font-semibold text-gray-900 mb-2\">Start your book discovery journey</h3>\n            <p className=\"text-gray-600 mb-8\">Search for books, authors, or explore our curated collection</p>\n            <div className=\"flex justify-center space-x-4\">\n              <Link\n                href=\"/dashboard\"\n                className=\"px-6 py-3 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-md hover:shadow-lg inline-flex items-center\"\n              >\n                <BookOpen className=\"h-5 w-5 mr-2\" />\n                View Your Dashboard\n              </Link>\n              {!user && (\n                <Link\n                  href=\"/auth/signin\"\n                  className=\"px-6 py-3 bg-white text-[#018283] border-2 border-[#018283] rounded-2xl hover:bg-[#018283]/5 transition-all duration-200 inline-flex items-center font-medium\"\n                >\n                  Sign In\n                </Link>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Sign-in prompt for non-authenticated users */}\n        {!user && books.length > 0 && (\n          <div className=\"fixed bottom-8 left-8 right-8 max-w-4xl mx-auto z-50\">\n            <div className=\"bg-white/95 backdrop-blur-xl border border-gray-200/50 rounded-3xl shadow-2xl p-8 relative overflow-hidden\">\n              <div className=\"absolute inset-0 bg-gradient-to-r from-[#018283]/5 to-[#2CAED8]/5\"></div>\n              <div className=\"relative flex items-center justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center mb-2\">\n                    <div className=\"w-10 h-10 bg-gradient-to-br from-[#018283] to-[#2CAED8] rounded-2xl flex items-center justify-center mr-3 shadow-lg\">\n                      <Sparkles className=\"h-5 w-5 text-white\" />\n                    </div>\n                    <h3 className=\"text-xl font-bold text-gray-900\">Ready to start reading?</h3>\n                  </div>\n                  <p className=\"text-gray-600\">Sign in to save books to your reading list and get personalized recommendations tailored just for you.</p>\n                </div>\n                <div className=\"flex items-center space-x-3 ml-8\">\n                  <Link\n                    href=\"/auth/signin\"\n                    className=\"px-8 py-3.5 bg-gradient-to-r from-[#018283] to-[#2CAED8] text-white rounded-2xl hover:from-[#017374] hover:to-[#2BA6C8] transition-all duration-200 shadow-lg hover:shadow-xl font-medium inline-flex items-center\"\n                  >\n                    Sign In\n                    <Plus className=\"h-4 w-4 ml-2\" />\n                  </Link>\n                  <button\n                    onClick={() => {\n                      const element = document.querySelector('.fixed.bottom-8');\n                      if (element) {\n                        (element as HTMLElement).style.display = 'none';\n                      }\n                    }}\n                    className=\"p-2 text-gray-400 hover:text-gray-600 rounded-xl hover:bg-gray-100 transition-colors duration-200\"\n                  >\n                    <X className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;AAPA;;;;;;;AA8Be,SAAS;;IACtB,MAAM,eAAe,IAAA,kLAAe;IACpC,MAAM,QAAQ,aAAa,GAAG,CAAC,QAAQ;IACvC,MAAM,QAAQ,aAAa,GAAG,CAAC,YAAY;IAC3C,MAAM,SAAU,aAAa,GAAG,CAAC,WAAW;IAC5C,MAAM,YAAY,aAAa,GAAG,CAAC,WAAW;IAE9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,mMAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,mMAAQ,EAAS,EAAE;IACjE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,mMAAQ,EAAS,EAAE;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,mMAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,mMAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,mMAAQ,EAAC;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,mMAAQ,EAA4B,CAAC;IACvE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,mMAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,mMAAQ,EAAC;IAC/C,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,uKAAO;IACxB,MAAM,gBAAgB,IAAA,iMAAM,EAAwB;IAEpD,MAAM,SAAS;QACb;QAAW;QAAe;QAAW;QAAY;QAAW;QAC5D;QAAW;QAAc;QAAa;QAAa;QAAY;QAC/D;QAAU;QAAgB;QAAoB;QAAa;QAAW;KACvE;IAED,MAAM,QAAQ;QAAC;QAAQ;QAAQ;QAAQ;QAAQ;QAAQ;QAAQ;QAAQ;KAAO;IAE9E,IAAA,oMAAS;kCAAC;YACR,cAAc;QAChB;iCAAG;QAAC;KAAM;IAEV,IAAA,oMAAS;kCAAC;YACR,IAAI,OAAO;gBACT;YACF,OAAO;gBACL,4CAA4C;gBAC5C;YACF;QACF;iCAAG;QAAC;QAAO;QAAO;QAAQ;KAAU;IAEpC,IAAA,oMAAS;kCAAC;YACR,IAAI,MAAM;gBACR;gBACA;YACF;QACF;iCAAG;QAAC;KAAK;IAET,IAAA,oMAAS;kCAAC;YACR,IAAI,MAAM;gBACR;YACF;QACF;iCAAG;QAAC;QAAM;KAAU;IAEpB,MAAM,sBAAsB;QAC1B,IAAI,MAAM;YACR,yDAAyD;YACzD,MAAM,QAAQ,GAAG,CAAC;gBAAC;gBAAwB;aAAqB;QAClE,OAAO;YACL,+CAA+C;YAC/C,MAAM;QACR;IACF;IAEA,MAAM,cAAc;QAClB,WAAW;QACX,IAAI;YACF,IAAI,YAAY,CAAC,oBAAoB,EAAE,mBAAmB,QAAQ;YAElE,IAAI,OAAO;gBACT,aAAa,CAAC,OAAO,EAAE,mBAAmB,QAAQ;YACpD;YAEA,IAAI,WAAW;gBACb,aAAa,CAAC,MAAM,EAAE,WAAW;YACnC;YAEA,IAAI,WAAW,aAAa;gBAC1B,aAAa,CAAC,MAAM,EAAE,QAAQ;YAChC;YAEA,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,SAAS,KAAK,KAAK,IAAI,EAAE;QAC3B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;QACjC,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,uBAAuB;QAC3B,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,yKAAQ,CAAC,IAAI,CAAC,UAAU;YAE5D,MAAM,UAAkC;gBACtC,gBAAgB;YAClB;YAEA,IAAI,SAAS,cAAc;gBACzB,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,QAAQ,YAAY,EAAE;YAC7D;YAEA,MAAM,WAAW,MAAM,MAAM,wBAAwB;gBAAE;YAAQ;YAC/D,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,mBAAmB,KAAK,eAAe,IAAI,EAAE;QAC/C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;QAC1C;IACF;IAEA,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,sCAAsC,EAAE,WAAW;YACjF,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,YAAY,KAAK,KAAK,IAAI,EAAE;QAC9B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;IACF;IAEA,MAAM,iBAAiB;QACrB,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,yKAAQ,CAAC,IAAI,CAAC,UAAU;YAE5D,IAAI,CAAC,SAAS,cAAc;YAE5B,MAAM,WAAW,MAAM,MAAM,oBAAoB;gBAC/C,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,QAAQ,YAAY,EAAE;gBACnD;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAElB,MAAM,SAAS,MAAM,SAAS,IAAI;YAClC,MAAM,UAAqC,CAAC;YAE5C,CAAC,OAAO,KAAK,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC;gBAC5B,OAAO,CAAC,SAAS,OAAO,CAAC,GAAG,SAAS,EAAE;YACzC;YAEA,aAAa;QACf,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,MAAM,gBAAgB,OAAO;QAC3B,IAAI,CAAC,MAAM;QAEX,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,yKAAQ,CAAC,IAAI,CAAC,UAAU;YAE5D,IAAI,CAAC,SAAS,cAAc;gBAC1B,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,WAAW,MAAM,MAAM,oBAAoB;gBAC/C,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,iBAAiB,CAAC,OAAO,EAAE,QAAQ,YAAY,EAAE;gBACnD;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,QAAQ,KAAK,EAAE,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;oBAClE,OAAO,KAAK,KAAK;oBACjB,QAAQ,KAAK,MAAM;oBACnB,MAAM,KAAK,IAAI;oBACf,UAAU,KAAK,QAAQ,IAAI,KAAK,SAAS;oBACzC,aAAa,KAAK,WAAW;oBAC7B,QAAQ,KAAK,MAAM;oBACnB,QAAQ;gBACV;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,WAAW,OAAO,KAAK,KAAK,KAAK,WAAW,KAAK,KAAK,GAAG,KAAK,SAAS,CAAC,KAAK,KAAK;gBACxF,MAAM,IAAI,MAAM,YAAY;YAC9B;YAEA,MAAM,SAAS,KAAK,EAAE,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;YACzE,aAAa,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,CAAC,OAAO,EAAE,KAAK,IAAI,CAAC,EAAE;gBAAC,CAAC;YACzD,MAAM,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,6BAA6B,CAAC;QACrD,EAAE,OAAO,OAAO;YACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YACzD,QAAQ,KAAK,CAAC,mBAAmB;YACjC,MAAM,CAAC,oBAAoB,EAAE,SAAS;QACxC;IACF;IAEA,MAAM,qBAAqB,OAAO,MAAY;QAC5C,IAAI,CAAC,MAAM;QAEX,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,yKAAQ,CAAC,IAAI,CAAC,UAAU;YAE5D,IAAI,CAAC,SAAS,cAAc;gBAC1B,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,SAAS,KAAK,EAAE,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;YACzE,MAAM,aAAa,SAAS,CAAC,OAAO;YAEpC,IAAI,CAAC,YAAY;gBACf,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,WAAW,MAAM,MAAM,2BAA2B;gBACtD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,iBAAiB,CAAC,OAAO,EAAE,QAAQ,YAAY,EAAE;gBACnD;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA,QAAQ;gBACV;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,CAAC,eAAe,EAAE,UAAU,OAAO,CAAC,MAAM,KAAK,WAAW,GAAG,CAAC,CAAC;QACvE,EAAE,OAAO,OAAO;YACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YACzD,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM,CAAC,uBAAuB,EAAE,SAAS;QAC3C;IACF;IAEA,MAAM,qBAAqB;QACzB,MAAM,gBAAgB;YAAC;YAAO;YAAQ;SAAU,CAAC,MAAM,CAAC,SAAS,MAAM;QACvE,OAAO,gBAAgB,IAAI,gBAAgB;IAC7C;IAEA,MAAM,kBAAkB;QACtB,MAAM,YAAY,IAAI,gBAAgB,aAAa,QAAQ;QAC3D,UAAU,MAAM,CAAC;QACjB,UAAU,MAAM,CAAC;QACjB,UAAU,MAAM,CAAC;QACjB,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,YAAY,EAAE,OAAO;IAC/C;IAEA,qBACE,uNAAC;QAAI,WAAU;kBACb,cAAA,uNAAC;YAAI,WAAU;;8BAEb,uNAAC;oBAAI,WAAU;;sCACb,uNAAC;4BAAI,WAAU;;8CACb,uNAAC;oCAAI,WAAU;;sDACb,uNAAC;4CAAI,WAAU;sDACb,cAAA,uNAAC,mPAAQ;gDAAC,WAAU;;;;;;;;;;;sDAEtB,uNAAC;4CAAI,WAAU;;;;;;;;;;;;8CAEjB,uNAAC;oCAAG,WAAU;8CAA8F;;;;;;;;;;;;sCAI9G,uNAAC;4BAAE,WAAU;sCAA0C;;;;;;;;;;;;8BAMzD,uNAAC;oBAAI,WAAU;8BACb,cAAA,uNAAC;wBAAI,WAAU;;0CACb,uNAAC;gCAAI,WAAU;;;;;;0CACf,uNAAC;gCAAI,WAAU;0CACb,cAAA,uNAAC;oCAAI,WAAU;;sDACb,uNAAC;4CAAI,WAAU;sDACb,cAAA,uNAAC,6OAAM;gDAAC,WAAU;;;;;;;;;;;sDAEpB,uNAAC;4CACE,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC;gDACT,cAAc,EAAE,MAAM,CAAC,KAAK;gDAC5B,eAAe;gDAEf,IAAI,cAAc,OAAO,EAAE;oDACzB,aAAa,cAAc,OAAO;gDACpC;gDAEA,cAAc,OAAO,GAAG,WAAW;oDACjC,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI,IAAI;wDACzB,MAAM,YAAY,IAAI,gBAAgB,aAAa,QAAQ;wDAC3D,UAAU,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK;wDACjC,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,UAAU,EAAE,UAAU,QAAQ,IAAI;oDAC5D,OAAO;wDACL,eAAe;oDACjB;gDACF,GAAG;4CACL;4CACA,WAAW,CAAC;gDACV,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,WAAW,IAAI,IAAI;oDAC3C,eAAe;oDACf,EAAE,cAAc;gDAClB;4CACF;4CACA,aAAY;4CACZ,WAAU;;;;;;sDAEb,uNAAC;4CAAI,WAAU;;8DACb,uNAAC;oDACC,SAAS,IAAM,eAAe,CAAC;oDAC/B,WAAW,CAAC;;sBAEV,EAAE,cACE,gFACA,oDACH;oBACH,CAAC;;sEAED,uNAAC,kRAAiB;4DAAC,WAAU;;;;;;sEAC7B,uNAAC;4DAAK,WAAU;sEAAsB;;;;;;wDACrC,sCACC,uNAAC;4DAAK,WAAU;sEACb;;;;;;;;;;;;8DAKP,uNAAC;oDAAI,WAAU;;sEACb,uNAAC;4DACC,OAAO;4DACP,UAAU,CAAC;gEACT,MAAM,YAAY,IAAI,gBAAgB,aAAa,QAAQ;gEAC3D,IAAI,EAAE,MAAM,CAAC,KAAK,KAAK,aAAa;oEAClC,UAAU,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,KAAK;gEACtC,OAAO;oEACL,UAAU,MAAM,CAAC;gEACnB;gEACA,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,UAAU,EAAE,UAAU,QAAQ,IAAI;4DAC5D;4DACA,WAAU;;8EAEV,uNAAC;oEAAO,OAAM;8EAAY;;;;;;8EAC1B,uNAAC;oEAAO,OAAM;8EAAa;;;;;;8EAC3B,uNAAC;oEAAO,OAAM;8EAAS;;;;;;8EACvB,uNAAC;oEAAO,OAAM;8EAAkB;;;;;;;;;;;;sEAElC,uNAAC,gQAAW;4DAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BAK7B,6BACC,uNAAC;gCAAI,WAAU;;kDACb,uNAAC;kDAAK;;;;;;kDACN,uNAAC;kDAAM;;;;;;;;;;;;;;;;;;;;;;;gBAOf,6BACC,uNAAC;oBAAI,WAAU;8BACb,cAAA,uNAAC;wBAAI,WAAU;;0CACb,uNAAC;gCAAI,WAAU;;kDACb,uNAAC;wCAAG,WAAU;kDAAsC;;;;;;oCACnD,CAAC,SAAS,aAAa,WAAW,WAAW,mBAC5C,uNAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;0CAML,uNAAC;gCAAI,WAAU;;kDACb,uNAAC;;0DACC,uNAAC;gDAAM,WAAU;;kEACf,uNAAC,6OAAM;wDAAC,WAAU;;;;;;oDAA+B;;;;;;;0DAGnD,uNAAC;gDAAI,WAAU;;kEACb,uNAAC;wDACC,OAAO;wDACP,UAAU,CAAC;4DACT,MAAM,YAAY,IAAI,gBAAgB,aAAa,QAAQ;4DAC3D,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE;gEAClB,UAAU,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,KAAK;4DACvC,OAAO;gEACL,UAAU,MAAM,CAAC;4DACnB;4DACA,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,UAAU,EAAE,UAAU,QAAQ,IAAI;wDAC5D;wDACA,WAAU;;0EAEV,uNAAC;gEAAO,OAAM;0EAAG;;;;;;4DAChB,OAAO,GAAG,CAAC,CAAC,kBACX,uNAAC;oEAAe,OAAO;8EAAI;mEAAd;;;;;;;;;;;kEAGjB,uNAAC,gQAAW;wDAAC,WAAU;;;;;;;;;;;;;;;;;;kDAI3B,uNAAC;;0DACC,uNAAC;gDAAM,WAAU;0DAA+C;;;;;;0DAChE,uNAAC;gDAAI,WAAU;;kEACb,uNAAC;wDACC,OAAO;wDACP,UAAU,CAAC;4DACT,MAAM,YAAY,IAAI,gBAAgB,aAAa,QAAQ;4DAC3D,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE;gEAClB,UAAU,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC,KAAK;4DACtC,OAAO;gEACL,UAAU,MAAM,CAAC;4DACnB;4DACA,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,UAAU,EAAE,UAAU,QAAQ,IAAI;wDAC5D;wDACA,WAAU;;0EAEV,uNAAC;gEAAO,OAAM;0EAAG;;;;;;4DAChB,MAAM,GAAG,CAAC,CAAC,qBACV,uNAAC;oEAAkB,OAAO;8EAAO;mEAApB;;;;;;;;;;;kEAGjB,uNAAC,gQAAW;wDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBASlC,CAAC,SAAS,QAAQ,gBAAgB,MAAM,GAAG,mBAC1C,uNAAC;oBAAI,WAAU;;sCACb,uNAAC;4BAAI,WAAU;;8CACb,uNAAC;oCAAI,WAAU;;sDACb,uNAAC,6PAAU;4CAAC,WAAU;;;;;;sDACtB,uNAAC;4CAAI,WAAU;;;;;;;;;;;;8CAEjB,uNAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,uNAAC;oCAAI,WAAU;8CACb,cAAA,uNAAC;wCAAK,WAAU;kDAAqC;;;;;;;;;;;;;;;;;sCAIzD,uNAAC;4BAAI,WAAU;sCACZ,gBAAgB,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,sBACtC,uNAAC;oCAAgB,WAAU;8CACzB,cAAA,uNAAC;wCAAI,WAAU;;0DACb,uNAAC;gDAAI,WAAU;;oDACZ,KAAK,QAAQ,IAAI,KAAK,SAAS,iBAC9B,uNAAC;wDACC,KAAK,KAAK,QAAQ,IAAI,KAAK,SAAS;wDACpC,KAAK,KAAK,KAAK;wDACf,WAAU;;;;;6EAGZ,uNAAC;wDAAI,WAAU;kEACb,cAAA,uNAAC;4DAAI,WAAU;;8EACb,uNAAC,uPAAQ;oEAAC,WAAU;;;;;;8EACpB,uNAAC;oEAAI,WAAU;;;;;;;;;;;;;;;;;kEAIrB,uNAAC;wDAAI,WAAU;;;;;;;;;;;;0DAGjB,uNAAC;gDAAI,WAAU;;kEACb,uNAAC;wDAAG,WAAU;kEACX,KAAK,KAAK;;;;;;kEAEb,uNAAC;wDAAE,WAAU;kEAA2C,KAAK,MAAM;;;;;;oDAClE,KAAK,MAAM,kBACV,uNAAC;wDAAI,WAAU;kEACZ,KAAK,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,OAAO,2BACnC,uNAAC;gEAAsB,WAAU;0EAC9B;+DADQ;;;;;;;;;;kEAMjB,uNAAC;wDAAI,WAAU;;0EACb,uNAAC;gEACC,SAAS,IAAM,cAAc;gEAC7B,WAAU;gEACV,UAAU,CAAC;;kFAEX,uNAAC,uOAAI;wEAAC,WAAU;;;;;;kFAChB,uNAAC;wEAAK,WAAU;kFACb,OAAO,gBAAgB;;;;;;;;;;;;0EAG5B,uNAAC,oMAAI;gEACH,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,EAAE,EAAE;gEAC9D,WAAU;0EAEV,cAAA,uNAAC,uOAAI;oEAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAjDhB;;;;;;;;;;;;;;;;gBA6DjB,CAAC,SAAS,SAAS,MAAM,GAAG,mBAC3B,uNAAC;oBAAI,WAAU;;sCACb,uNAAC;4BAAI,WAAU;;8CACb,uNAAC;oCAAI,WAAU;;sDACb,uNAAC,0OAAK;4CAAC,WAAU;;;;;;sDACjB,uNAAC;4CAAG,WAAU;sDAAmC;;;;;;;;;;;;8CAGnD,uNAAC;oCAAI,WAAU;8CACZ;wCAAC;wCAAO;wCAAS;qCAAO,CAAC,GAAG,CAAC,CAAC,mBAC7B,uNAAC;4CAEC,SAAS,IAAM,aAAa;4CAC5B,WAAW,CAAC,mDAAmD,EAC7D,cAAc,KACV,4BACA,kEACJ;sDAED,OAAO,QAAQ,aAAa,OAAO,UAAU,eAAe;2CARxD;;;;;;;;;;;;;;;;sCAcb,uNAAC;4BAAI,WAAU;sCACZ,SAAS,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,MAAM,sBAC/B,uNAAC;oCAAgB,WAAU;8CACzB,cAAA,uNAAC;wCAAI,WAAU;;0DACb,uNAAC;gDAAI,WAAU;;oDACZ,KAAK,QAAQ,IAAI,KAAK,SAAS,iBAC9B,uNAAC;wDACC,KAAK,KAAK,QAAQ,IAAI,KAAK,SAAS;wDACpC,KAAK,KAAK,KAAK;wDACf,WAAU;;;;;6EAGZ,uNAAC;wDAAI,WAAU;kEACb,cAAA,uNAAC;4DAAI,WAAU;;8EACb,uNAAC,uPAAQ;oEAAC,WAAU;;;;;;8EACpB,uNAAC;oEAAI,WAAU;;;;;;;;;;;;;;;;;kEAIrB,uNAAC;wDAAI,WAAU;;4DAAqG;4DAChH,QAAQ;;;;;;;kEAEZ,uNAAC;wDAAI,WAAU;;;;;;;;;;;;0DAGjB,uNAAC;gDAAI,WAAU;;kEACb,uNAAC;wDAAG,WAAU;kEACX,KAAK,KAAK;;;;;;kEAEb,uNAAC;wDAAE,WAAU;kEAA2C,KAAK,MAAM;;;;;;kEACnE,uNAAC;wDAAI,WAAU;;0EACb,uNAAC;gEACC,SAAS,IAAM,cAAc;gEAC7B,WAAU;gEACV,UAAU,CAAC;;kFAEX,uNAAC,uOAAI;wEAAC,WAAU;;;;;;kFAChB,uNAAC;wEAAK,WAAU;kFACb,OAAO,gBAAgB;;;;;;;;;;;;0EAG5B,uNAAC,oMAAI;gEACH,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,EAAE,EAAE;gEAC9D,WAAU;0EAEV,cAAA,uNAAC,uOAAI;oEAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCA3ChB;;;;;;;;;;;;;;;;gBAuDjB,MAAM,MAAM,GAAG,mBACd,uNAAC;;sCACC,uNAAC;4BAAI,WAAU;;8CACb,uNAAC;;sDACC,uNAAC;4CAAG,WAAU;sDACX,QAAQ,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC,GAAG;;;;;;sDAEtC,uNAAC;4CAAE,WAAU;;gDACV,MAAM,MAAM;gDAAC;gDAAE,MAAM,MAAM,KAAK,IAAI,SAAS;gDAAQ;;;;;;;;;;;;;gCAGzD,CAAC,SAAS,aAAa,WAAW,WAAW,mBAC5C,uNAAC;oCAAI,WAAU;;sDACb,uNAAC;4CAAK,WAAU;sDAAwB;;;;;;sDACxC,uNAAC;4CAAI,WAAU;;gDACZ,uBACC,uNAAC;oDAAK,WAAU;8DACb;;;;;;gDAGJ,2BACC,uNAAC;oDAAK,WAAU;8DACb;;;;;;gDAGJ,WAAW,6BACV,uNAAC;oDAAK,WAAU;8DACb;;;;;;;;;;;;;;;;;;;;;;;;sCAQb,uNAAC;4BAAI,WAAU;sCACZ,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,uNAAC;oCAAgB,WAAU;8CACzB,cAAA,uNAAC;wCAAI,WAAU;;0DACb,uNAAC;gDAAI,WAAU;;oDACZ,KAAK,QAAQ,iBACZ,uNAAC;wDACC,KAAK,KAAK,QAAQ;wDAClB,KAAK,KAAK,KAAK;wDACf,WAAU;;;;;6EAGZ,uNAAC;wDAAI,WAAU;kEACb,cAAA,uNAAC;4DAAI,WAAU;;8EACb,uNAAC,uPAAQ;oEAAC,WAAU;;;;;;8EACpB,uNAAC;oEAAI,WAAU;;;;;;;;;;;;;;;;;kEAIrB,uNAAC;wDAAI,WAAU;;;;;;;;;;;;0DAGjB,uNAAC;gDAAI,WAAU;;kEACb,uNAAC;wDAAG,WAAU;kEACX,KAAK,KAAK;;;;;;kEAEb,uNAAC;wDAAE,WAAU;kEAA2C,KAAK,MAAM;;;;;;oDAElE,KAAK,SAAS,kBACb,uNAAC;wDAAE,WAAU;;4DACV,KAAK,SAAS;4DAAC;4DAAU,KAAK,aAAa;;;;;;;oDAI/C,KAAK,WAAW,kBACf,uNAAC;wDAAE,WAAU;kEACV,KAAK,WAAW;;;;;;kEAIrB,uNAAC;wDAAI,WAAU;;4DACZ,SAAS,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,iBACzD,uNAAC;gEACC,OAAM;gEACN,UAAU,CAAC;oEACT,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE;wEAClB,mBAAmB,MAAM,EAAE,MAAM,CAAC,KAAK;wEACvC,EAAE,MAAM,CAAC,KAAK,GAAG;oEACnB;gEACF;gEACA,WAAU;;kFAEV,uNAAC;wEAAO,OAAM;kFAAG;;;;;;kFACjB,uNAAC;wEAAO,OAAM;kFAAe;;;;;;kFAC7B,uNAAC;wEAAO,OAAM;kFAAoB;;;;;;kFAClC,uNAAC;wEAAO,OAAM;kFAAO;;;;;;kFACrB,uNAAC;wEAAO,OAAM;kFAAM;;;;;;;;;;;qFAGtB,uNAAC;gEACC,SAAS,IAAM,cAAc;gEAC7B,WAAU;gEACV,UAAU,CAAC;;kFAEX,uNAAC,uOAAI;wEAAC,WAAU;;;;;;kFAChB,uNAAC;wEAAK,WAAU;kFACb,OAAO,gBAAgB;;;;;;;;;;;;0EAI9B,uNAAC,oMAAI;gEACH,MAAM,CAAC,OAAO,EAAE,KAAK,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,KAAK,EAAE,EAAE;gEACnD,WAAU;0EAEV,cAAA,uNAAC,uOAAI;oEAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAxEhB;;;;;;;;;;;;;;;;gBAoFjB,yBACC,uNAAC;oBAAI,WAAU;;sCACb,uNAAC;4BAAI,WAAU;;8CACb,uNAAC;oCAAI,WAAU;8CACb,cAAA,uNAAC;wCAAI,WAAU;kDACb,cAAA,uNAAC,6OAAM;4CAAC,WAAU;;;;;;;;;;;;;;;;8CAGtB,uNAAC;oCAAI,WAAU;;;;;;;;;;;;sCAEjB,uNAAC;4BAAG,WAAU;sCAA4C;;;;;;sCAC1D,uNAAC;4BAAE,WAAU;sCAAgB;;;;;;sCAE7B,uNAAC;4BAAI,WAAU;;8CACb,uNAAC;oCAAI,WAAU;oCAAmD,OAAO;wCAAE,gBAAgB;oCAAM;;;;;;8CACjG,uNAAC;oCAAI,WAAU;oCAAmD,OAAO;wCAAE,gBAAgB;oCAAQ;;;;;;8CACnG,uNAAC;oCAAI,WAAU;oCAAmD,OAAO;wCAAE,gBAAgB;oCAAQ;;;;;;;;;;;;;;;;;;gBAMxG,CAAC,WAAW,MAAM,MAAM,KAAK,KAAK,CAAC,SAAS,CAAC,CAAC,SAAS,MAAM,IAAI,CAAC,IAAI,mBACrE,uNAAC;oBAAI,WAAU;;sCACb,uNAAC;4BAAI,WAAU;;8CACb,uNAAC;oCAAI,WAAU;8CACb,cAAA,uNAAC;wCAAI,WAAU;;0DACb,uNAAC,uPAAQ;gDAAC,WAAU;;;;;;0DACpB,uNAAC;gDAAI,WAAU;;;;;;;;;;;;;;;;;8CAGnB,uNAAC;oCAAI,WAAU;;;;;;;;;;;;sCAGjB,uNAAC;4BAAG,WAAU;sCAA4C;;;;;;sCAC1D,uNAAC;4BAAE,WAAU;sCAAqB;;;;;;sCAClC,uNAAC;4BAAI,WAAU;;8CACb,uNAAC,oMAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,uNAAC,uPAAQ;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;gCAGtC,CAAC,sBACA,uNAAC,oMAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;gBASR,CAAC,QAAQ,MAAM,MAAM,GAAG,mBACvB,uNAAC;oBAAI,WAAU;8BACb,cAAA,uNAAC;wBAAI,WAAU;;0CACb,uNAAC;gCAAI,WAAU;;;;;;0CACf,uNAAC;gCAAI,WAAU;;kDACb,uNAAC;wCAAI,WAAU;;0DACb,uNAAC;gDAAI,WAAU;;kEACb,uNAAC;wDAAI,WAAU;kEACb,cAAA,uNAAC,mPAAQ;4DAAC,WAAU;;;;;;;;;;;kEAEtB,uNAAC;wDAAG,WAAU;kEAAkC;;;;;;;;;;;;0DAElD,uNAAC;gDAAE,WAAU;0DAAgB;;;;;;;;;;;;kDAE/B,uNAAC;wCAAI,WAAU;;0DACb,uNAAC,oMAAI;gDACH,MAAK;gDACL,WAAU;;oDACX;kEAEC,uNAAC,uOAAI;wDAAC,WAAU;;;;;;;;;;;;0DAElB,uNAAC;gDACC,SAAS;oDACP,MAAM,UAAU,SAAS,aAAa,CAAC;oDACvC,IAAI,SAAS;wDACV,QAAwB,KAAK,CAAC,OAAO,GAAG;oDAC3C;gDACF;gDACA,WAAU;0DAEV,cAAA,uNAAC,8NAAC;oDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUjC;GArzBwB;;QACD,kLAAe;QAenB,uKAAO;;;KAhBF"}}]
}